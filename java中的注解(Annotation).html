<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>java中的注解(Annotation)</title>
<!--  -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta name='viewport' content='width=device-width,initial-scale=1'><link rel='stylesheet' href='/res/code.css' /><link rel='stylesheet' href='/res/solarized-light.min.css' />
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="http://www.iknockdoor.com/"> UP </a>
|
 <a accesskey="H" href="http://www.iknockdoor.com/"> HOME </a>
|
<a accesskey="H" href=""> RSS </a>
</div><div id="content">
<h1 class="title">java中的注解(Annotation)</h1>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">java中的注解(Annotation)</h2>
<div class="outline-text-2" id="text-1">
<p>
现在很多框架工具都使用注解的方式实现，比如junit，eventbugs等等，理解
java的注解会比较有助于理解这些工具，也可以在平时应用注解。
</p>
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">什么是java注解</h3>
<div class="outline-text-3" id="text-1-1">
<p>
从使用层面来理解，java注解并不会提供程序，方法，对象，类新的功能或者任何可执行的代码，他只会提供给编译器一些key value，根据注解的类型不同，编译器可以在编译阶段使用注解，也可以将注解信息作为一个key
value记录在编译好的class文件中，供程序通过反射的方法读取，并根据这些key value来执行不同的动作。比如junit，通过注解的方式告诉来junit框架哪些方法是测试用例，哪些是前置后置条件，然后junit执行过程中根据这些信息知道如何调用测试用例。
</p>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">自定义注解的语法</h3>
<div class="outline-text-3" id="text-1-2">
<div class="org-src-container">

<pre class="src src-java">   <span class="org-c-annotation">@Documented</span>
<span class="org-c-annotation">@Retention</span>(<span class="org-constant">RetentionPolicy</span>.<span class="org-type">RUNTIME</span>)
<span class="org-c-annotation">@Target</span>(<span class="org-constant">ElementType</span>.<span class="org-type">ANNOTATION_TYPE</span>)
<span class="org-keyword">public</span> <span class="org-keyword">@interface</span> <span class="org-type">Target</span> {
    <span class="org-type">String</span> <span class="org-function-name">value</span>() <span class="org-keyword">default</span> <span class="org-string">"unknow"</span>;
}
</pre>
</div>
<p>
用@interface关键字，用方法名作为key，返回值作为key的类型，default提供默认值 
</p>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">注解的本质</h3>
<div class="outline-text-3" id="text-1-3">
<p>
通过反编译，可以发现注解本质上是一个继承自
java.lang.annotation.Annotation的接口
</p>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">java注解的实现原理</h3>
<div class="outline-text-3" id="text-1-4">
<p>
那么接口怎么能够设置属性呢？简单来说就是java通过动态代理的方式为你生成了一个实现了"接口"`TestAnnotation`的实例（对于当前的实体来说，例如类、方法、属性域等，这个代理对象是单例的），然后对该代理实例的属性赋值，这样就可以在程序运行时（如果将注解设置为运行时可见的话）通过反射获取到注解的配置信息。
</p>

<p>
上面这段理解很关键，原文在<i>这里</i> 
</p>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5">原注解</h3>
<div class="outline-text-3" id="text-1-5">
<p>
原注解是用来注解其他自定义或系统提供的注解的注解。java 5中提供的原注解如下：
</p>
<ol class="org-ol">
<li>@Target
</li>
<li>@Retention
</li>
<li>@Documented
</li>
<li>@Inherited
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

<div id="org-div-home-and-up">
 <a href="/index.html"> 返回目录 </a>
</div>
<p class="author">by chappie (iknockdoor.com@gmail.com)</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.2.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-103057848-1', 'auto');
        ga('send', 'pageview');
</script>
</div>
</body>
</html>
